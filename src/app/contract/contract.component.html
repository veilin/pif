<div class="container-fluid pl-5 pr-2">
  <div class="pagehead">
    <h1>
      <span translate>My proposals</span>
      <button routerLink="/add-contract"
              *ngIf="userType !== undefined && (userType === 1 || userType === 2)"
              class="btn btn-primary ml-5 mb-1">Register a proposal</button>
      <hr/>
    </h1>

    <div id="products" class="row view-group">
      <div class="item col-xs-4 col-lg-4 list-group-item"
           *ngFor="let proposal of myContracts; trackBy : trackContractById">
        <div class="card"
             style="position:relative;display:-ms-flexbox;display:flex;-ms-flex-direction:row;
             flex-direction:row;min-width:0;word-wrap:break-word;
             background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.125);">
          <div class="img-event" style="min-width: 400px;min-height: 250px;">
            <img
              src="https://maps.googleapis.com/maps/api/staticmap?center={{proposal.lat}},{{proposal.lng}}&zoom=13&size=400x250&maptype=roadmap&markers=color:blue|label:P|{{proposal.lat}},{{proposal.lng}}&key=AIzaSyALUeYBJmAIXi-PYYeO89H-zmLE-UPFF0I"
              style="border:0; padding: 0;margin: 0;"/>
          </div>
          <div class="caption card-body">
            <h2 class="group card-title inner list-group-item-heading d-inline">{{proposal.name}}
              <h3 class="d-inline"><span class="d-inline ml-3 badge badge-success">{{proposal.status}}</span></h3>
            </h2>
            <p class="group inner list-group-item-text mt-3">{{proposal.description}}</p>
            <p class="group inner list-group-item-text">{{proposal.goal}}</p>
            <p class="group inner list-group-item-text">Funded by <b>{{getName(proposal)}}</b></p>
            <div class="row">
              <div class="col-xs-12 col-md-12">
                <p class="d-inline lead font-weight-bold">$ {{proposal.value}}</p>
                <button class="ml-3 line btn btn-success" (click)="invest(proposal)"
                        *ngIf="userType !== undefined && userType === 0 && (proposal.investor === undefined || proposal.investor ==='')">Fund this project</button>
                <button class="ml-3 line btn btn-success" (click)="startContract(proposal)"
                        *ngIf="userType !== undefined && userType === 2 && proposal.status === 'Funded'">Start Project</button>
                <button class="ml-3 line btn btn-success" (click)="deliverContract(proposal)"
                        *ngIf="userType !== undefined && userType === 2 && proposal.status === 'In Progress'">Finish Project</button>
                <button class="ml-3 line btn btn-success" (click)="verifyContract(proposal)"
                        *ngIf="userType !== undefined && userType === 1 && proposal.status === 'Delivered'">Verify Project Completed</button>
              </div>
            </div>
            <!--<div class="row">-->
              <!--<div class="col-xs-12 col-md-12">-->
                <!--&lt;!&ndash;<button class="lead btn btn-danger" (click)="removeContract(proposal)">Delete</button>&ndash;&gt;-->
              <!--</div>-->
            <!--</div>-->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
